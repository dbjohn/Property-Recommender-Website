<!DOCTYPE html>

<html>
<head>

    <title>Pie Charts and Options</title>

    <link class="include" rel="stylesheet" type="text/css" href="../jquery.jqplot.min.css" />
    <link rel="stylesheet" type="text/css" href="examples.min.css" />
    <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shCoreDefault.min.css" />
    <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shThemejqPlot.min.css" />
  
    <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="../excanvas.js"></script><![endif]-->
    <script class="include" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
	<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    
   
</head>
<body>
    <div id="header">
        <div class="nav">
            <a class="nav" href="../../../index.php"><span>&gt;</span>Home</a>
            <a class="nav"  href="../../../docs/"><span>&gt;</span>Docs</a>
            <a class="nav"  href="../../download/"><span>&gt;</span>Download</a>
            <a class="nav" href="../../../info.php"><span>&gt;</span>Info</a>
            <a class="nav"  href="../../../donate.php"><span>&gt;</span>Donate</a>
        </div>
    </div>
    <div class="colmask leftmenu">
      <div class="colleft">
        <div class="col1" id="example-content">

  
<!-- Example scripts go here -->


<div id="target">
Click here
</div>
<div id="slider1"></div><input id="checkbox_slider1" type="checkbox" name="lock" value="true">Lock<br>
<div id="div_slider1">
test
</div><br>
<div id="slider2"></div><input id="checkbox_slider2" type="checkbox" name="lock" value="false">Lock<br>
<div id="div_slider2">
test
</div><br>
<div id="slider3"></div><input id="checkbox_slider3" type="checkbox" name="lock" value="false">Lock<br>
<div id="div_slider3">
test
</div><br>

<div id="test1">
test1
</div>
    <div id="pie1" style="margin-top:20px; margin-left:20px; width:200px; height:200px;"></div>

  
<script class="code" type="text/javascript">$(document).ready(function(){
	var options = {
        gridPadding: {top:0, bottom:38, left:0, right:0},
        seriesDefaults:{
            renderer:$.jqplot.PieRenderer, 
            trendline:{ show:false }, 
            rendererOptions: { padding: 8, showDataLabels: true }
        },
        legend:{
            show:true, 
            placement: 'outside', 
            rendererOptions: {
                numberRows: 1
            }, 
            location:'s',
            marginTop: '15px'
        }       
    };
   var plot1 = $.jqplot('pie1', [[['J_Brennan',25],['b',14],['c',7]]], options);
   var data = [[['I like cats',65],['b',14],['c',7]]];
   
	$("#target").click(function() {
 //plot1.data = [[['I like cats',65],['b',14],['c',7]]];
 //plot1.replot;  
 console.log('hi');
//console.log($.jqplot('pie1'));
console.log(data);
console.log(plot1.data);
//plot1.data = [[['I like cats',65],['b',14],['c',7]]];


//for some reason the replot doesn't work. At least I couldn't get it to work and there weren't many examples on the internet to assist.
//plot1.replot();  

//however as seen in a number of places the suggestions were to empty the div and simply initialise the plot again.

//$('#pie1').empty();
//plot1 = $.jqplot('pie1', data, options);

//$.jqplot('pie1').replot();
//$('#pie1').jqplot('pie1').replot();
//$.jqplot('pie1').data = [[['I like cats',65],['b',14],['c',7]]]; 
 //$.jqplot('pie1').replot({data: [[['I like cats',65],['b',14],['c',7]]]});   
//  $.jqplot('pie1').replot();   
 console.log('bye');
});

//jquery-ui  slider http://jqueryui.com/slider/#range
//http://ux.stackexchange.com/questions/34230/how-do-you-show-a-locked-slider

//$( '[id^="slider"]').slider({
	//							min: 0,
		//						max: 100,
			//					slide: function( event, ui ) {
				//					$( "#target" ).text( ui.value );
					//				
						//			data = [[['I like cats',ui.value],['b',(100-ui.value)/2],['c', (100-ui.value)/2]]];
						//			$('#pie1').empty();
						//			plot1 = $.jqplot('pie1', data, options);
						//		}
						//	});
	//	});
	 var freeValue = $('input:checkbox[name=lock]').length;
	 var totalChecked = 0;
	// var freeValue = 0;
//$('#slider1').slider({
$('[id^="slider"]').slider({
								range: "min",
								min: 0,
								max: 100,
								step: 5,
								value: 60,
								ratio: 60/100,
								slide: function( event, ui ) {
									
									
									if (freeValue == 1) {return false;}
									if(ui.value > (100-totalChecked)){return false;}
									//$("#test").text( $('input:checkbox[name=lock]:checked').prev().slider("value"));
									
									//$("#test").text( $('input:checkbox[name=lock]:checked').prev('[id^="slider"]').first.slider("value"));
									//$("#test").text(
									// $("#div_slider1").text(ui.value);
									console.log("change -------------------------------------------------------------");
									//old value
									// console.log( $(this).slider("value"));
									// //new value
									// console.log( ui.value);
									var total = 0;
									
									oldRemainder = 100 -  $(this).slider("value");
									//newRemainder = 100 -  ui.value;
									
									 // $('input:checkbox[name=lock]:checked').prev().each( function(){
										// console.log($(this).slider("value"));
										// total += $(this).slider("value");
										
										// });
										
										var newRemainder = 100 -  totalChecked;
										//this doesn't work
										//$('[id^="slider"]:disabled')
										
										console.log(oldRemainder);
										var max = 100 - total;
										console.log("max= " + max);
										
										 $('input:checkbox[name=lock]:not(:checked)').not(this).prev().each( function(){
											
											var oldMax = $(this).slider( "option", "max");																																	
											var oldValue = $(this).slider("value");											
											
											$("#" + "div_" + $(this).attr("id") ).text("old value: " + oldValue + " remaining percentage : " + $(this).slider("option", "ratio") + " new value = " + newRemainder * ($(this).slider("option", "ratio")));
											
											$(this).slider("value", newRemainder * ($(this).slider("option", "ratio")));
											// console.log("changed slider to: " + $(this).slider("value"));
											
											//$(this).slider( "option", "max", max);
										});
										 
									
										 $(this).slider( "option", "ratio", ui.value/100);
										 $("#" + "div_" + $(this).attr("id") ).text("old value: " + oldValue + " remaining percentage : " + $(this).slider("option", "ratio") + " new value = " + ui.value);
										 console.log("ui " + ui.value);
									// data = [[['I like cats',ui.value],['b',(100-ui.value)/2],['c', (100-ui.value)/2]]];
									// $('#pie1').empty();
									// plot1 = $.jqplot('pie1', data, options);
							//		$('#slider2').slider( "value", (100-ui.value)/2);
								}
								//change is called after any time value is changed
								// ,change: function( event, ui ) {
										// var total = 0;
									
									
									
									 // $('input:checkbox[name=lock]:checked').prev().each( function(){
										// console.log($(this).slider("value"));
										// total += $(this).slider("value");										
										// });
										
										// var newRemainder = 100 -  total;
										// //this doesn't work
										// //$('[id^="slider"]:disabled')
										
										// console.log(oldRemainder);
										
										// //1/x * max
										
										 // $('input:checkbox[name=lock]:not(:checked)').not(this).prev().each( function(){
										
											
											// oldValue = $(this).slider("value");
											// // oldRatio = oldValue/oldRemainder;
											// // console.log("oldValue= " + oldValue);
											// // console.log("ratio= " + $(this).slider("option", "ratio"));
											
									
											
											// $(this).slider("value", newRemainder * ($(this).slider("option", "ratio")));
											// // console.log("changed slider to: " + $(this).slider("value"));
											
											// //$(this).slider( "option", "max", max);
										// });
								// }
							});

	
	var slider1Remainder=100-$('#slider1').slider("value");
	$('#slider2').slider("option", "value",  slider1Remainder- 10).slider("option", "ratio", (slider1Remainder- 10)/(slider1Remainder));
	
							
	
	var slider2Remainder = slider1Remainder - $('#slider2').slider("value");
							
$('#slider3').slider("option", "value", slider2Remainder).slider("option", "ratio", (slider2Remainder)/(slider1Remainder));
							
$('[id^="checkbox_slider"]').change(function() {
									
										if(this.checked){
											$(this).prev().slider("disable");
											totalChecked += $(this).prev().slider("value");
											freeValue -= 1;
										}
										else{
												$(this).prev().slider("enable");
												totalChecked -= $(this).prev().slider("value");
												freeValue += 1;
										}
									});
									
									$('[id^="checkbox_slider"]').prop('checked',false);
		});				
	
</script>


<!-- End example scripts -->

<!-- Don't touch this! -->


    <script class="include" type="text/javascript" src="../jquery.jqplot.min.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/scripts/shCore.min.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushJScript.min.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushXml.min.js"></script>
<!-- End Don't touch this! -->

<!-- Additional plugins go here -->

  <script class="include" type="text/javascript" src="../plugins/jqplot.pieRenderer.min.js"></script>

<!-- End additional plugins -->

        </div>
         <div class="col2">

           <div class="example-link"><a class="example-link" href="data-renderers.html">AJAX and JSON Data Loading via Data Renderers</a></div>
           <div class="example-link"><a class="example-link" href="barLineAnimated.html">Animated Charts</a></div>
           <div class="example-link"><a class="example-link" href="dashboardWidget.html">Animated Dashboard Sample - Filled Line with Log Axis</a></div>
           <div class="example-link"><a class="example-link" href="kcp_area.html">Area Chart</a></div>
           <div class="example-link"><a class="example-link" href="kcp_area2.html">Area Chart 2</a></div>
           <div class="example-link"><a class="example-link" href="axisLabelTests.html">Axis Labels</a></div>
           <div class="example-link"><a class="example-link" href="axisLabelsRotatedText.html">Axis Labels and Rotated Text</a></div>
           <div class="example-link"><a class="example-link" href="barTest.html">Bar Charts</a></div>
           <div class="example-link"><a class="example-link" href="multipleBarColors.html">Bar Colors Example</a></div>
           <div class="example-link"><a class="example-link" href="bezierCurve.html">Bezier Curve Plots</a></div>
           <div class="example-link"><a class="example-link" href="blockPlot.html">Block Plots</a></div>
           <div class="example-link"><a class="example-link" href="bubbleChart.html">Bubble Charts</a></div>
           <div class="example-link"><a class="example-link" href="bubble-plots.html">Bubble Plots</a></div>
           <div class="example-link"><a class="example-link" href="candlestick.html">Candlestick and Open Hi Low Close Charts</a></div>
           <div class="example-link"><a class="example-link" href="theming.html">Chart Theming</a></div>
           <div class="example-link"><a class="example-link" href="fillBetweenLines.html">Charts with Fill Between Lines</a></div>
           <div class="example-link"><a class="example-link" href="kcp_cdf.html">Cumulative Density Function Chart</a></div>
           <div class="example-link"><a class="example-link" href="dashedLines.html">Dashed Lines with Smoothing</a></div>
           <div class="example-link"><a class="example-link" href="cursor-highlighter.html">Data Point Highlighting, Tooltips and Cursor Tracking</a></div>
           <div class="example-link"><a class="example-link" href="point-labels.html">Data Point labels</a></div>
           <div class="example-link"><a class="example-link" href="date-axes.html">Date Axes</a></div>
           <div class="example-link"><a class="example-link" href="dateAxisRenderer.html">Date Axes 2</a></div>
           <div class="example-link"><a class="example-link" href="rotatedTickLabelsZoom.html">Date Axes, Rotated Labels and Zooming</a></div>
           <div class="example-link"><a class="example-link" href="canvas-overlay.html">Draw Lines on Plots - Canvas Overlay</a></div>
           <div class="example-link"><a class="example-link" href="kcp_engel.html">Engel Curves</a></div>
           <div class="example-link"><a class="example-link" href="bandedLine.html">Error Bands and Confidence Intervals</a></div>
           <div class="example-link"><a class="example-link" href="area.html">Filled (Area) Charts</a></div>
           <div class="example-link"><a class="example-link" href="axisScalingForceTickAt.html">Force Plot to Have Tick at 0 or 100</a></div>
           <div class="example-link"><a class="example-link" href="hiddenPlotsInTabs.html">Hidden Plots</a></div>
           <div class="example-link"><a class="example-link" href="customHighlighterCursorTrendline.html">Highlighting, Dragging Points, Cursor and Trend Lines</a></div>
           <div class="example-link"><a class="example-link" href="line-charts.html">Line Charts and Options</a></div>
           <div class="example-link"><a class="example-link" href="kcp_lorenz.html">Lorenz Curves</a></div>
           <div class="example-link"><a class="example-link" href="mekkoCharts.html">Mekko Charts</a></div>
           <div class="example-link"><a class="example-link" href="meterGauge.html">Meter Gauge</a></div>
           <div class="example-link"><a class="example-link" href="candlestick-charts.html">Open Hi Low Close and Candlestick Charts</a></div>
           <div class="example-link"><a class="example-link" href="pieTest.html">Pie Charts and Options</a></div>
           <div class="example-link"><a class="example-link" href="pieTest4.html">Pie Charts and Options 2</a></div>
           <div class="example-link"><a class="example-link" href="pie-donut-charts.html">Pie and Donut Charts</a></div>
           <div class="example-link"><a class="example-link" href="selectorSyntax.html">Plot Creation with jQuery Selectors</a></div>
           <div class="example-link"><a class="example-link" href="zooming.html">Plot Zooming and Cursor Control</a></div>
           <div class="example-link"><a class="example-link" href="kcp_pdf.html">Probability Density Function Chart</a></div>
           <div class="example-link"><a class="example-link" href="kcp_pyramid_by_age.html">Pyramid Chart By Age</a></div>
           <div class="example-link"><a class="example-link" href="kcp_pyramid.html">Pyramid Charts</a></div>
           <div class="example-link"><a class="example-link" href="kcp_pyramid2.html">Pyramid Charts 2</a></div>
           <div class="example-link"><a class="example-link" href="kcp_quintiles.html">Quintile Pyramid Charts</a></div>
           <div class="example-link"><a class="example-link" href="resizablePlot.html">Resizable Plots</a></div>
           <div class="example-link"><a class="example-link" href="rotated-tick-labels.html">Rotated Labels and Font Styling</a></div>
           <div class="example-link"><a class="example-link" href="smoothedLine.html">Smoothed Lines</a></div>
           <div class="example-link"><a class="example-link" href="bar-charts.html">Vertical and Horizontal Bar Charts</a></div>
           <div class="example-link"><a class="example-link" href="waterfall.html">Waterfall Charts</a></div>
           <div class="example-link"><a class="example-link" href="waterfall2.html">Waterfall Charts 2</a></div>
           <div class="example-link"><a class="example-link" href="zoomOptions.html">Zoom Options</a></div>
           <div class="example-link"><a class="example-link" href="zoomProxy.html">Zoom Proxy - Control one plot from another</a></div>
           <div class="example-link"><a class="example-link" href="zoom1.html">Zooming</a></div>
           <div class="example-link"><a class="example-link" href="dateAxisLogAxisZooming.html">Zooming with Date and Log Axes</a></div>

         </div>
               </div>
    </div>
    <script type="text/javascript" src="example.min.js"></script>

</body>


</html>
